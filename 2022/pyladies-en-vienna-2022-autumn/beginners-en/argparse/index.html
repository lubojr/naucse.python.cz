
<!doctype html>
<html lang="cs">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>
            
                Beginners course PyLadies Vienna: Argparse – Command line interface
            
        </title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

        

        <link rel="stylesheet" href="/static/css/naucse.css">
        <link rel="stylesheet" href="/static/css/body.css">
        <link rel="stylesheet" href="/static/css/pygments-lovelace-style.css">
        <link rel="stylesheet" href="/static/css/ipython.css">

        
    <link rel="canonical" href="https://naucse.python.cz/lessons/beginners-en/argparse/" />


        <style>
            
    

        </style>
    </head>

    <body>
        <nav class="header">
            <ul class="container menu">
                <li><a href="/" class="logo"><h1>PyLadies Vienna</h1></a></li>
                <!-- <li><a href="/courses/" class="menu-link"><h2>Materials</h2></a></li> -->
                <li><a href="/runs/" class="menu-link"><h2>Courses</h2></a></li>
            </ul>
        </nav>

        

<div class="page">
    <div class="container">

        
  


        <div class="lesson-content">
          
    

    <h1>argparse</h1>
<p>The <code>argparse</code> library is used to create a command line interface - CLI.
Primarily this means program argument processing. It is a part of the standard library, so you do not need to
install anything extra.</p>
<h2>Command line interface</h2>
<p>... is one of ways how to interact with or control a program (or Python script) as a user - <strong>interface</strong> with it
from inside the computer itself where it is installed (not over the internet).
That user can be you as a creator of code and someone else you give access to it.</p>
<p>The behavior of a program usually is varying - it depends on the instructions 
you give to it.</p>
<p>Adding command line arguments to a program enables terminal magic using <code>find</code> command like this:</p>
<div class="highlight"><pre><span></span><span class="go">find . -type f -name "*.txt" -empty -mtime 30</span>
</pre></div><p>Which searches current directory for empty files with .txt suffix and a modification date older than 30 days.
The find command internally has a lot of switches controlling its
behavior while filtering the folder(s) is is searching through
based on user given parameters of the search.</p>
<h3>Examples of libraries &amp; argparse</h3>
<p>Quite many tools for processing arguments from the CLI are also present in the standard Python:
<code>sys.argv</code>, <code>optparse</code>, <code>getopt</code>.
Additionally there is quite commonly used <code>click</code> library, which you would need to install via pip
and uses a decorator syntax, that we have not seen yet, so we have decided not to delve into it.</p>
<p>You can find the official documentation on:</p>
<ul>
<li><a href="https://docs.python.org/3/library/argparse.html">argparse</a></li>
<li><a href="https://docs.python.org/3/library/sys.html#sys.argv">sys.argv</a></li>
<li><a href="https://docs.python.org/3/library/optparse.html">optparse</a></li>
<li><a href="https://docs.python.org/3/library/getopt.html">getopt</a></li>
</ul>
<p>And a quite handy tutorial going through most of functionalities, you could ever encounter:
<a href="https://docs.python.org/3/howto/argparse.html">argparse-tutorial</a></p>
<p>Here's how to easily create Python command line application with switches:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">'argparse greeting'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-n'</span><span class="p">,</span> <span class="s1">'--name'</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">'a name to repeat'</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-c'</span><span class="p">,</span> <span class="s1">'--count'</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">'how many times'</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"--indent"</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">"store_true"</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="p">(</span><span class="s2">"name will be indented by 4 spaces"</span><span class="p">))</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Simple program that greets 'name' for a total of 'count' times and optionally indents."""</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">indent</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"    "</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Hello </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">!"</span><span class="p">)</span>

<span class="n">hello</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">indent</span><span class="p">)</span>
</pre></div><p>The first step in using the argparse is creating an <code>ArgumentParser</code> object with some description.
Then you fill an ArgumentParser with information about program
arguments, which is done by making calls to the <code>add_argument()</code> method.
This information is stored and used when <code>parse_args()</code> is called.</p>
<p>You can set parameters as required by adding <code>required=True</code> option.
It is also possible to their <code>type</code>, which will try to convert the variable to the data type announced.
In order to allow simple storing of boolean flags <code>True/False</code>, you can use the <code>action="store_true"</code> parameter.</p>
<p>Try it! If you have it saved as <code>hello.py</code>, try:</p>
<div class="highlight"><pre><span></span><span class="go">python3 hello.py</span>
<span class="go">python3 hello.py --help</span>
<span class="go">python3 hello.py --name PyLady</span>
<span class="go">python3 hello.py --count 5</span>
<span class="go">python3 hello.py --count 5 --name PyLady</span>
<span class="go">python3 hello.py --count 5 --name PyLady --indent</span>
</pre></div><p>That is already a very solid first program is it not?</p>
<h2>Positional arguments</h2>
<p>You can of course define arguments, which are <code>positional</code> in the same way as when you are defining and calling
a function. The parsing will expect all arguments to be in the order, you defined them.</p>
<div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"input_file"</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="p">(</span><span class="s2">"Input file to read"</span><span class="p">))</span>
</pre></div><div class="highlight"><pre><span></span><span class="go">python3 hello.py input.txt --count 5 --name PyLady</span>
</pre></div><h2>Other options</h2>
<p>Switch names begin, according to Unix convention, with hyphens: one hyphen <code>-</code>
for one-letter abbreviations, two hyphens <code>--</code> for multi-letter names.
One switch can have more than one name - short option and long option.</p>
<div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">"-v"</span><span class="p">,</span> <span class="s2">"--verbosity"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
        <span class="n">help</span><span class="o">=</span><span class="p">(</span>
            <span class="s2">"Set verbosity of log output "</span>
            <span class="s2">"(4=DEBUG, 3=INFO, 2=WARNING, 1=ERROR, 0=CRITICAL). (default: 3)"</span>
        <span class="p">),</span>
    <span class="p">)</span>
</pre></div><p>Parameter names with <code>hyphens</code> inside them will automatically turn them into variable names 
with <code>underscores</code>, as it is not possible to have a <code>hyphen</code> in variable name in Python.</p>
<div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">"--extreme-universe"</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">"store_true"</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="p">(</span><span class="s2">"Computations will return all results to the power of 2."</span><span class="p">)</span>
    <span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">extreme_universe</span><span class="p">)</span>
</pre></div><p>If you use more options with two hyphens, you need to access the values from the <code>args</code>
object via the first option, as in this example:</p>
<div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-n'</span><span class="p">,</span> <span class="s1">'--name'</span><span class="p">,</span> <span class="s1">'--firstname'</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">'a name to repeat'</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">hello</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">indent</span><span class="p">)</span>
</pre></div><div class="highlight"><pre><span></span><span class="gp"># </span>both<span class="w"> </span>work
<span class="go">python3 hello.py --name PyLady --count 5</span>
<span class="go">python3 hello.py --firstname PyLady --count 5</span>
</pre></div><p>This has been a short introduction into working with CLI.</p>


        </div>

        


        
    <div class="row prev-next">
        
            
                
    <div class="col text-left">
        <a href="/2022/pyladies-en-vienna-2022-autumn/beginners-en/files/">← <span class="d-none d-sm-inline">Files</span></a>
    </div>

            
            
                
    <div class="col text-left">
        <a href="/2022/pyladies-en-vienna-2022-autumn/sessions/files_cli/">↑ <span class="d-none d-sm-inline">Lesson: Working with Files and CLI</span></a>
    </div>

            
            
                
    <div class="col text-right">
        <a href="/2022/pyladies-en-vienna-2022-autumn/sessions/files_cli/back/"><span class="d-none d-sm-inline">End of lesson</span> →</a>
    </div>

            
        
    </div>


        

    </div>
</div>



        <script type="text/javascript" src="/static/js/solutions.js"></script>

        <div class="footer container">
            <hr>
            <div class="lesson-attribution">
                
    
        <p>Translated by Lubomir Dolezal</p>
    
        <p>Originally written by Miro Hrončok, Petr Viktorin and others, 2016-2017 for MI-PYT course on CVU Prague: 
<a href="https://naucse.python.cz/lessons/intro/click/">https://naucse.python.cz/lessons/intro/click/</a></p>
    

                
    <p>
        Licence:
        <a href="https://creativecommons.org/licenses/by-sa/4.0/">
            Creative Commons Attribution-ShareAlike 4.0 International
        </a>
    </p>
    

                
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

        

    </body>
</html>